<nav-item>
  <h1 class="offscreen"> { label } </h1>
  <a href="#{ getRoute() }"
    onclick={ onClick } class="routeLink"> { label } </a>
  <div class="sub-nav-container" if={ subNavItems.length }>
    <nav>
      <sub-nav-doodad />
      <nav-bar
        class="nav sub-nav"
        label={ label + ' Sub Navigation' }
        items={ subNavItems }
      />
    </nav>
  </div>

  <script>
    riot.observable(this); 

    this.onClick = function(e) {
      var wasActive = this.root.classList.contains('active');
      this.trigger('setActive');
      if (!wasActive) {
        this.root.classList.add('active');
        riot.route( this.getRoute() );
      }
      return false;
    };

    this.isSub = function() {
      return this.parent.root.classList.contains('sub-nav');
    };

    this.parentLabel = function() {
      if (this.parent.label) {
        return this.parent.label
        .toLowerCase()
        .replace(/-\s/g, '_');
      } else {
        return '';
      }
    };

    this.getRoute = function() {
      var route = '';
      console.log("this.isSub() ::", this.isSub());
      if (this.isSub()) {
        route += this.parentLabel();
        route += '/';
      }
      route += this.label.toLowerCase();
      return route;
    };
  </script>
</nav-item>