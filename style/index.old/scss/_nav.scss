nav-bar {
  display: block;

  ul {
    list-style-type: none;
    margin: 0 auto;
    padding: 0;
  }
  nav-bar ul li {
    display: inline-block;
  }
}

nav-item {
  display: inline-block;
  margin: 0;
  width: 30%;

  background: transparent;
  // overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  a {
    cursor: pointer;
  }
}

$navTL: 0.25s;
nav .main-nav {
  height: auto;
  transform: scale(1);
  transform-origin: top center;
  transition: transform $navTL linear,
                 height $navTL linear;
}


.main-nav {
  width: 100%;

  margin: 0 auto;
  text-overflow: ellipsis;

  box-shadow: $nav-box-shadow;
  border-bottom: thin solid $nav-box-divider-color-border;
}

.main-nav>nav-item {
  position: relative;
  height: 100%;
  font-size: 20px;
  line-height: 24px;
  overflow: hidden;
  vertical-align: top;
  
  a {
    height: inherit;
    user-select: none;
  }
}


.sub-nav-container {
  .sub-nav {
    display: block;

    width: 100%;
    cursor: default;

    nav-item {
      // border-bottom: thin solid black;
      font-size: 14px;
      line-height: 18px;
      overflow: hidden;
      margin: 0 1%;
    }
  }

  .sub-nav-doodad {
    display: block;
    height: 11px;
    margin: 4px auto 3px;
    max-width: 640px;
    width: 100%;

    line {
      fill: none;
      stroke: $base-font-color;
    }

    .mid,
    .z line:nth-child(1),
    .z line:nth-child(3) {
      stroke-dasharray: 12;
      stroke-dashoffset: 12;
    }
    .z {
      line:nth-child(2) {
        stroke-dasharray: 110%;
        stroke-dashoffset: 110%;
      }
    }
  }
}

.sub-nav-container {
  .sub-nav {
    nav-item {
      opacity: 0;
      transform: scaleY(0);
    }
  }
}

/* Set up transitions */

$tL: 0.25; // transitionLength
.sub-nav-container {
  transition: opacity #{$tL * 2}s linear;

  // These are the "recede" transitions.
  .sub-nav {
    nav-item {
      transform-origin: top center;
      transition: transform #{$tL*1.00}s linear,
                    opacity #{$tL*0.50}s linear;
    }
  }

  .sub-nav-doodad {
    .mid {
      transition: stroke-dashoffset #{$tL*0.75}s linear #{$tL*0.5}s;
    }
    .z {
      line:nth-child(1) {
        // First section of z.
        transition: stroke-dashoffset #{$tL*0.1}s linear #{$tL*0.8}s;
      }
      line:nth-child(2) {
        // Horizontal section of z.
        transition: stroke-dashoffset #{$tL*0.8}s linear #{$tL*0.1}s;
      }
      line:nth-child(3) {
        // Last section of z.
        transition: stroke-dashoffset #{$tL*0.1}s linear;
      }
    }
  }
}


.active {
  // These are the "come out" transitions.
  .sub-nav {
    nav-item {
      transition: opacity #{$tL*2.00}s linear #{$tL*0.1}s;
    }
  }

  .sub-nav-doodad {
    .mid {
      transition: stroke-dashoffset #{$tL*0.75}s linear;
    }
    .z {
      line:nth-child(1) {
        transition: stroke-dashoffset #{$tL*0.1}s linear;
      }
      line:nth-child(3) {
        transition: stroke-dashoffset #{$tL*0.1}s linear #{$tL*0.65}s;
      }
    }
  }
}



/*Activate anim*/
.active {
  .sub-nav-container {
    opacity: 1;

    .sub-nav {
      nav-item {
        opacity: 1;
        transform: scaleY(1);
      }
    }

    .sub-nav-doodad {
      line,
      .z line {
        stroke-dashoffset: 0;
      }
    }
  }
}
